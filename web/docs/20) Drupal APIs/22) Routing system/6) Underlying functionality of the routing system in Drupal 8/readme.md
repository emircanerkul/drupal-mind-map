---
url: >-
  https://www.drupal.org/docs/drupal-apis/routing-system/underlying-functionality-of-the-routing-system-in-drupal-8
description: >-
  The Drupal 8 routing system builds a great deal on the Symfony framework. To
  define and use routes, you don't necessarily need to know the Symfony
  concepts, but for more advanced use cases, knowing the background helps a lot.
  Drupal 8 uses the Symfony HTTP Kernel, a system which gets the request and
  asks other systems to produce the requested output (a response object) and
  sends the response back to the client. The output is generated by a piece of
  code called the controller. In theory the controller can be either a pure PHP
  4 function, a method on an object or even an anonymous function.
published_time: '2013-07-20T07:52:58+00:00'
modified_time: '2021-08-16T18:57:48+00:00'
---
The Drupal 8 routing system builds a great deal on the Symfony framework. To define and use routes, you don't necessarily need to know the Symfony concepts, but for more advanced use cases, knowing the background helps a lot.

Drupal 8 uses the Symfony HTTP Kernel, a system which gets the request and asks other systems to produce the requested output (a response object) and sends the response back to the client. The output is generated by a piece of code called the controller. In theory the controller can be either a pure PHP 4 function, a method on an object or even an anonymous function.

### Symfony routing compared to Drupal routing

As a module developer you define the list of routes and the corresponding controllers, for example:

```php
taxonomy.autocomplete_vid:
  path: '/taxonomy/autocomplete_vid/{taxonomy_vocabulary}'
  defaults:
    _controller: '\Drupal\taxonomy\Controller\TermAutocompleteController::autocompletePerVid'
  requirements:
    taxonomy_vocabulary: \d+

```

(Symfony documentation uses 'pattern' instead of 'path', but since Symfony 2.2 (now incorporated in Drupal) the 'path' key is used in the routing file.)

The key concept is the controller which gets some parameters from the system and converts them to the response. In this example you have the parameter 'taxonomy\_vocabulary'. Everything without an underscore is considered to be a parameter to the controller. If you want to specify a default value, you should put it into the default array. Properties that have nothing to do with the controller parameters are considered to be internal and have an underscore as prefix.

Symfony also allows you to define regular expressions to validate that the incoming parameter is valid (using 'requirements'). In the code above it would only match to numbers.

### Controller resolver

Once Symfony determines which controller is active on the current request, it asks the so called controller resolver to create an instance of the controller, which is then executed via call\_user\_func\_array(). See the getController() and getArguments() methods on [ControllerResolver](https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Controller%21ControllerResolver.php/class/ControllerResolver/8).

### Drupal's extensions to Symfony routing

The above is basically what Symfony gives us for request handling. Drupal though is slightly more complicated:

* You can check access to the route. For example, calling user\_access() was very common in Drupal 7 and below.
* You want to convert the taxonomy\_vocabulary to its actual entity object in the request
* You don't want to generate the full page response, but just the "main content".

The "underscore keys" in the routing file inform these systems.

Old content to be reworked below this line. 

---

The system that knows which controller is responsible for the current request is the routing system.

This documentation describes how the routing system in Drupal 8 works.

Prerequisites:

* To learn how to create router entries, see <https://drupal.org/node/2092643>
* Read the symfony documentation: <http://symfony.com/doc/current/book/routing.html>

// @todo Additional to high level overview we should also give the service IDs so people can debug it.  
// @todo Maybe some of these sections should be moved to extra handbooks.  
// @todo How to mention that everything is based on events.